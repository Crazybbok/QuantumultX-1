
mixed-port: 7890

allow-lan: false

bind-address: '*'

mode: rule

log-level: info

ipv6: false

external-controller: 127.0.0.1:9090

hosts:
  'mtalk.google.com': 108.177.125.188

dns:
  enable: false
  listen: 0.0.0.0:53

default-nameserver:
    - 119.29.29.29
    - 1.0.0.1
  enhanced-mode: redir-host # or fake-ip
  fake-ip-range: 198.18.0.1/16 # Fake IP addresses pool CIDR
  
  nameserver:
    - 119.29.29.29

fallback:
    - https://cloudflare-dns.com/dns-query

  fallback-filter:
    geoip: true
    ipcidr:

proxies:

# 服务器节点订阅
proxy-providers:
  # name: # Provider 名称
  #   type: http # http 或 file
  #   path: # 文件路径
  #   url: # 只有当类型为 HTTP 时才可用，您不需要在本地空间中创建新文件。
  #   interval: # 自动更新间隔，仅在类型为 HTTP 时可用
  #   health-check: # 健康检查选项从此处开始
  #     enable:
  #     url: 
  #     interval: 

  #
  # 「url」参数填写订阅链接
  #
  # 订阅链接可以使用 API 进行转换，如：https://sub.dler.io/
  #
  # 1.模式选择「进阶模式」 2.填写订阅链接 3.勾选「输出为 Node List」 4.「生成订阅链接」
  #

  DuckDuckGo-Sub: # 冲鸭机场订阅链接
    type: http
    url: "https://duckduckgo.security/user/sub.php?token=DivineEngine"
    interval: 3600
    path: ./Proxy/ProxyList.yaml # 不同机场不同命名
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

proxy-groups:
  - name: "Fallback"
    type: fallback
    proxies:
      - HK
      - US
      - SG
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  - name: "PROXY"
    type: select
    proxies:
      - Fallback
      - HK
      - US
      - SG
      - DuckDuckGo

  - name: "MATCH"
    type: select
    proxies:
      - PROXY
      - DIRECT

  - name: "Streaming"
    type: select
    proxies:
      - PROXY
      - HK
      - US
      - SG

  - name: "StreamingSE"
    type: select
    proxies:
      - DIRECT
      - HK

  - name: "DuckDuckGo"
    type: select # 亦可使用 fallback 或 load-balance
    use:
      - DuckDuckGo-Sub

rule-providers:

  Unbreak:
    type: http
    behavior: classical
    path: ./RuleSet/Unbreak.yaml
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Unbreak.yaml
    interval: 86400

  Streaming:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingMedia/Streaming.yaml
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/Streaming.yaml
    interval: 86400

  StreamingSE:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingMedia/StreamingSE.yaml
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/StreamingSE.yaml
    interval: 86400

  Global:
    type: http
    behavior: classical
    path: ./RuleSet/Global.yaml
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Global.yaml
    interval: 86400

  China:
    type: http
    behavior: classical
    path: ./RuleSet/China.yaml
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/China.yaml
    interval: 86400

  ChinaIP:
    type: http
    behavior: ipcidr
    path: ./RuleSet/Extra/ChinaIP.yaml
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Extra/ChinaIP.yaml
    interval: 86400

# 规则
rules:

  - RULE-SET,Unbreak,DIRECT

  - RULE-SET,Streaming,Streaming

  - RULE-SET,StreamingSE,StreamingSE

  - RULE-SET,Global,PROXY

  - RULE-SET,China,DIRECT

  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT

  - IP-CIDR,119.28.28.28/32,DIRECT
  - IP-CIDR,182.254.116.0/24,DIRECT
  
  - GEOIP,CN,DIRECT

  - MATCH,MATCH
